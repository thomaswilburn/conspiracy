<!doctype html>

<style>
.highlight {
  background: yellow;
}
</style>

<template id="source">
  <div ref:outer class:highlight="b">
    <!-- text:a -->
    <embed text:b>
  </div>
  <button on:click="demo-event" attr:hidden.toggle="nested.hideButton"><embed text:nested.property></button>
</template>

<div id="first"></div>
<div id="second"></div>

<script type="module">
import { Conspiracy } from "./index.js";
var data = { a: "hello", b: "world", nested: { property: "Click me!" } };

var conspiracy = new Conspiracy(window.source);
var firstFragment = conspiracy.renderTo(first, data);

data.nested.hideButton = true;
setTimeout(() => firstFragment.update(data), 5000);

console.log(firstFragment);

conspiracy.renderTo(second, { a: "goodbye", b: "conspiracy", nested: { property: "also clickable" }});

document.addEventListener("demo-event", e => console.log(e));

</script>